<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Circuito 2025.01 - Formul√°rio</title>
  <style>
    body {
      background: linear-gradient(135deg, #0b1a13 0%, #163325 100%);
      font-family: 'Segoe UI', Arial, sans-serif;
      min-height: 100vh;
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .form-card {
      background: #162c20;
      border-radius: 22px;
      box-shadow: 0 8px 32px #0a1a12, 0 1.5px 8px #1b3c2b66;
      padding: 32px 28px 28px 28px;
      max-width: 430px;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 18px;
      align-items: stretch;
      border: 2.5px solid #1de982;
      position: relative;
      overflow: hidden;
    }
    .progress-bar-bg {
      width: 100%;
      height: 12px;
      background: #0e1c14;
      border-radius: 0 0 12px 12px;
      margin-bottom: 0;
      overflow: hidden;
      box-shadow: 0 2px 8px #1de98233;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #1de982 0%, #43e97b 100%);
      transition: width 0.4s cubic-bezier(.4,2.2,.2,1);
      border-radius: 0 0 12px 12px;
      box-shadow: 0 0 8px #1de98299;
    }
    #timer-container {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 18px 0 0 0;
    }
    #timer {
      background: #0e1c14;
      color: #1de982;
      font-weight: 900;
      font-size: 1.35rem;
      border-radius: 8px;
      padding: 10px 24px;
      letter-spacing: 2px;
      border: 2px solid #1de982;
      box-shadow: 0 0 12px #1de98244;
      font-family: 'Courier New', Courier, monospace;
      text-shadow: 0 0 8px #1de98288;
    }
    .form-title {
      font-size: 2.1rem;
      color: #1de982;
      font-weight: 900;
      text-align: center;
      margin: 24px 0 2px 0;
      letter-spacing: 1px;
      text-shadow: 0 2px 8px #1de98255;
    }
    .form-desc {
      text-align: center;
      color: #b2dfdb;
      font-size: 1.13rem;
      margin-bottom: 10px;
    }
    .form-label {
      font-weight: 600;
      color: #1de982;
      margin-bottom: 4px;
      font-size: 1.13rem;
      text-shadow: 0 1px 4px #1de98233;
    }
    .form-input {
      padding: 12px;
      border-radius: 8px;
      border: 2px solid #1de982;
      font-size: 1.08rem;
      margin-bottom: 10px;
      background: #0e1c14;
      color: #fff;
      transition: border-color 0.2s, box-shadow 0.2s;
      box-shadow: 0 0 8px #1de98222;
    }
    .form-input:focus {
      border-color: #43e97b;
      outline: none;
      background: #162c20;
      box-shadow: 0 0 12px #1de98255;
    }
    .form-btn {
      background: linear-gradient(90deg, #1de982 0%, #43e97b 100%);
      color: #10281b;
      border: none;
      border-radius: 10px;
      padding: 15px 0;
      font-size: 1.18rem;
      font-weight: 800;
      cursor: pointer;
      margin-top: 10px;
      transition: 
        background 0.2s, 
        transform 0.15s, 
        box-shadow 0.2s,
        filter 0.2s;
      box-shadow: 0 0 16px #1de98255, 0 2px 8px #1de98222;
      letter-spacing: 1px;
      text-shadow: 0 1px 4px #fff8;
    }
    .form-btn:hover {
      filter: brightness(1.15);
      box-shadow: 0 0 32px #1de982cc, 0 2px 16px #1de98244;
      transform: scale(1.04);
    }
    .btn-voltar {
      background: transparent !important;
      color: #1de982 !important;
      border: 2px solid #1de982 !important;
      box-shadow: none !important;
      margin-top: 10px;
      margin-bottom: 0;
      font-weight: 700;
      transition: 
        background 0.2s, 
        color 0.2s, 
        border 0.2s, 
        transform 0.15s, 
        box-shadow 0.2s;
    }
    .btn-voltar:hover {
      background: #0e1c14 !important;
      color: #43e97b !important;
      border-color: #43e97b !important;
      box-shadow: 0 0 16px #1de98288;
      transform: scale(1.04);
    }
    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .quiz-options input[type="radio"] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }
    .quiz-options label {
      position: relative;
      cursor: pointer;
      padding: 10px 14px;
      border-radius: 8px;
      font-size: 1.08rem;
      transition: background 0.15s, color 0.15s, border 0.15s;
      border: 2px solid transparent;
      color: #b2dfdb;
      background: #1b3c2b;
      box-shadow: 0 0 4px #1de98222;
    }
    .quiz-options input[type="radio"]:focus + label,
    .quiz-options label:hover {
      background: #10281b;
      border-color: #1de982;
      color: #1de982;
      box-shadow: 0 0 8px #1de98255;
    }
    .quiz-options input[type="radio"]:checked + label {
      background: #10281b;
      border: 2.5px solid #43e97b;
      color: #1de982;
      font-weight: bold;
      box-shadow: 0 0 24px #1de982cc, 0 0 8px #1de98299 inset, 0 0 12px #1de98299;
      transform: scale(1.04);
      transition: box-shadow 0.2s, background 0.2s, color 0.2s, transform 0.2s, border 0.2s;
      z-index: 1;
    }
    .quiz-options input[type="radio"]:checked + label::before {
      background: #1de982;
      border-color: #43e97b;
      box-shadow: 0 0 8px #1de98299, 0 0 0 4px #1de98233;
    }
    #sending-loader, #resultado, #quiz-form {
      display: none;
      flex-direction: column;
      align-items: center;
    }
    #mensagem-resultado {
      font-size: 1.3rem;
      color: #1de982;
      margin: 18px 0;
      text-shadow: 0 1px 4px #1de98255;
    }
    .correcao {
      margin-top: 18px;
      background: #0e1c14;
      border-radius: 10px;
      padding: 10px 16px;
      color: #b2dfdb;
      font-size: 1.04rem;
      border: 2px solid #1de982;
      box-shadow: 0 0 8px #1de98233;
    }
    .step { display: none; flex-direction: column; gap: 12px; }
    .step.active { display: flex; animation: fadeIn 0.5s;}
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px);}
      to { opacity: 1; transform: translateY(0);}
    }
    ul.regras {
      text-align:left;
      color:#b2dfdb;
      font-size:1.04rem;
      margin:0 0 10px 0;
      padding-left:18px;
    }
    .botoes-etapa {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 8px;
    }
    .form-btn, .btn-voltar {
      flex: 1 1 0;
      min-width: 0;
    }
    @media (max-width: 600px) {
      .form-card {
        padding: 8px 2vw 8px 2vw;
        max-width: 99vw;
      }
      .form-title { font-size: 1.2rem; }
      #timer { font-size: 1.05rem; padding: 7px 8px;}
      .form-label, .form-desc { font-size: 1rem; }
      .quiz-options label { font-size: 0.98rem; padding: 8px 8px; }
      .botoes-etapa { flex-direction: column; gap: 6px; }
      .form-btn, .btn-voltar { font-size: 1rem; padding: 12px 0; }
      #mensagem-resultado { font-size: 1.05rem; }
      .correcao { font-size: 0.97rem; padding: 8px 6px; }
      #carrossel-correcao { flex-direction: column; gap: 8px; }
    }
    /* Impede sele√ß√£o de texto em todo o corpo e elementos principais */
    body, .form-card, .quiz-options label, .form-label, .form-title, .form-desc {
      user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
    }
    .loader {
      border: 6px solid #1de98244;
      border-top: 6px solid #1de982;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
    .correcao-seta {
      background: #1de982;
      color: #10281b;
      border: none;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      font-size: 1.5rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 8px #1de98255;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s, transform 0.15s;
      margin: 0 4px;
    }
    .correcao-seta:hover {
      background: #43e97b;
      transform: scale(1.12);
    }
    @media (max-width: 600px) {
      .correcao-seta {
        width: 32px;
        height: 32px;
        font-size: 1.15rem;
      }
    }
  </style>
</head>
<body>
  <div id="page-loader" style="position:fixed;z-index:99999;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#0b1a13;">
    <div style="display:flex;flex-direction:column;align-items:center;gap:18px;">
      <div class="loader"></div>
      <div style="color:#1de982;font-size:1.3rem;font-weight:bold;">Carregando...</div>
    </div>
  </div>

  <div style="position:fixed;top:0;left:0;width:100vw;background:#1de982;color:#10281b;font-weight:bold;text-align:center;padding:8px 0;z-index:9999;box-shadow:0 2px 8px #1de98255;">
    ‚ö†Ô∏è N√£o saia da p√°gina ou troque de aba! Isso encerrar√° sua avalia√ß√£o.
  </div>
  <div class="form-card" id="inicio">
    <div style="display:flex;justify-content:center;">
      <span style="font-size:3.2rem; color:#1de982; filter:drop-shadow(0 0 8px #1de98288); margin-bottom:10px;">üéÆ</span>
    </div>
    <div class="form-title" style="font-size:2.5rem; margin-bottom:0;">Circuito 2025.01</div>
    <div class="form-desc" style="font-size:1.18rem; margin-bottom:18px;">
      <b>Bem-vindo ao desafio!</b><br>
      <span style="color:#1de982;">Ingl√™s e Portugu√™s</span><br>
      <span style="color:#b2dfdb;">Responda todas as perguntas no tempo e tente bater o recorde!</span>
    </div>
    <div style="background:#0e1c14;border-radius:12px;padding:14px 18px;margin-bottom:18px;border:1.5px solid #1de982;">
      <ul class="regras" style="margin:0;">
        <li>N√£o saia da p√°gina durante o quiz.</li>
        <li>Tempo limitado: <b>120 minutos</b>.</li>
        <li>Fale com um professor em caso de d√∫vida.</li>
      </ul>
    </div>
    <button class="form-btn" style="font-size:1.25rem;box-shadow:0 0 18px #1de98288;" onclick="comecar()">Come√ßar!</button>
  </div>

  <form class="form-card" id="quiz-form" autocomplete="off">
    <div class="progress-bar-bg">
      <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
    </div>
    <div id="timer-container">
      <div id="timer">
        ‚è± <span id="timer-count">120:00</span>
      </div>
    </div>
    <div class="form-title">Circuito 2025.01</div>
    <div class="form-desc">Ingl√™s e Portugu√™s<br>Responda todas as perguntas e clique em Enviar!</div>

    <!-- Etapa 1: Nome da equipe -->
    <div class="step active">
      <label class="form-label" for="nome">Nome da equipe</label>
      <input class="form-input" type="text" id="nome" name="nome" required placeholder="Digite o nome da equipe">
      <div class="botoes-etapa">
        <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
      </div>
    </div>

    <!-- INGL√äS -->
<div class="step">
  <div class="form-label">1. Complete the sentence:<br>She has ___ finished her homework.</div>
  <div class="quiz-options">
    <input type="radio" id="q1a" name="q1" value="yet" required>
    <label for="q1a">a) yet</label>
    <input type="radio" id="q1b" name="q1" value="just">
    <label for="q1b">b) just</label>
    <input type="radio" id="q1c" name="q1" value="still">
    <label for="q1c">c) still</label>
    <input type="radio" id="q1d" name="q1" value="never">
    <label for="q1d">d) never</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">2. Escolha qual quest√£o usa corretamente o ‚Äúyet‚Äù:</div>
  <div class="quiz-options">
    <input type="radio" id="q2a" name="q2" value="Have you done your homework yet?" required>
    <label for="q2a">a) Have you done your homework yet?</label>
    <input type="radio" id="q2b" name="q2" value="I have yet done my homework.">
    <label for="q2b">b) I have yet done my homework.</label>
    <input type="radio" id="q2c" name="q2" value="Yet I have done my homework.">
    <label for="q2c">c) Yet I have done my homework.</label>
    <input type="radio" id="q2d" name="q2" value="Have yet you done your homework?">
    <label for="q2d">d) Have yet you done your homework?</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">3. Complete:<br>He has ___ been very responsible.</div>
  <div class="quiz-options">
    <input type="radio" id="q3a" name="q3" value="yet" required>
    <label for="q3a">a) yet</label>
    <input type="radio" id="q3b" name="q3" value="just">
    <label for="q3b">b) just</label>
    <input type="radio" id="q3c" name="q3" value="always">
    <label for="q3c">c) always</label>
    <input type="radio" id="q3d" name="q3" value="still">
    <label for="q3d">d) still</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">4. Qual das alternativas apresenta somente verbos irregulares?</div>
  <div class="quiz-options">
    <input type="radio" id="q4a" name="q4" value="play ‚Äì walk ‚Äì open" required>
    <label for="q4a">a) play ‚Äì walk ‚Äì open</label>
    <input type="radio" id="q4b" name="q4" value="go ‚Äì see ‚Äì eat">
    <label for="q4b">b) go ‚Äì see ‚Äì eat</label>
    <input type="radio" id="q4c" name="q4" value="talk ‚Äì cook ‚Äì work">
    <label for="q4c">c) talk ‚Äì cook ‚Äì work</label>
    <input type="radio" id="q4d" name="q4" value="jump ‚Äì live ‚Äì close">
    <label for="q4d">d) jump ‚Äì live ‚Äì close</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">5. Qual √© o passado do verbo regular ‚Äúto play‚Äù?</div>
  <div class="quiz-options">
    <input type="radio" id="q5a" name="q5" value="played" required>
    <label for="q5a">a) played</label>
    <input type="radio" id="q5b" name="q5" value="play">
    <label for="q5b">b) play</label>
    <input type="radio" id="q5c" name="q5" value="playing">
    <label for="q5c">c) playing</label>
    <input type="radio" id="q5d" name="q5" value="plays">
    <label for="q5d">d) plays</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">6. Qual das frases est√° correta no Simple Present?</div>
  <div class="quiz-options">
    <input type="radio" id="q6a" name="q6" value="He go to school every day." required>
    <label for="q6a">a) He go to school every day.</label>
    <input type="radio" id="q6b" name="q6" value="She goes to school every day.">
    <label for="q6b">b) She goes to school every day.</label>
    <input type="radio" id="q6c" name="q6" value="I goes to school every day.">
    <label for="q6c">c) I goes to school every day.</label>
    <input type="radio" id="q6d" name="q6" value="They goes to school every day.">
    <label for="q6d">d) They goes to school every day.</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">7. We ___ TV every night.</div>
  <div class="quiz-options">
    <input type="radio" id="q7a" name="q7" value="watches" required>
    <label for="q7a">a) watches</label>
    <input type="radio" id="q7b" name="q7" value="watched">
    <label for="q7b">b) watched</label>
    <input type="radio" id="q7c" name="q7" value="watch">
    <label for="q7c">c) watch</label>
    <input type="radio" id="q7d" name="q7" value="watching">
    <label for="q7d">d) watching</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">8. Qual frase √© adequada para se despedir no final de uma conversa informal?</div>
  <div class="quiz-options">
    <input type="radio" id="q8a" name="q8" value="See you later!" required>
    <label for="q8a">a) See you later!</label>
    <input type="radio" id="q8b" name="q8" value="How old are you?">
    <label for="q8b">b) How old are you?</label>
    <input type="radio" id="q8c" name="q8" value="Where are you going?">
    <label for="q8c">c) Where are you going?</label>
    <input type="radio" id="q8d" name="q8" value="What‚Äôs your name?">
    <label for="q8d">d) What‚Äôs your name?</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">9. Como se responde a ‚ÄúHow are you?‚Äù de maneira informal e positiva?</div>
  <div class="quiz-options">
    <input type="radio" id="q9a" name="q9" value="I‚Äôm tired." required>
    <label for="q9a">a) I‚Äôm tired.</label>
    <input type="radio" id="q9b" name="q9" value="See you later.">
    <label for="q9b">b) See you later.</label>
    <input type="radio" id="q9c" name="q9" value="I‚Äôm fine, thanks.">
    <label for="q9c">c) I‚Äôm fine, thanks.</label>
    <input type="radio" id="q9d" name="q9" value="I don‚Äôt know">
    <label for="q9d">d) I don‚Äôt know</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">10. ‚Äî Good afternoon, Dr. Silva.<br>‚Äî ________, Mr. Thomas. Please, have a seat.</div>
  <div class="quiz-options">
    <input type="radio" id="q10a" name="q10" value="How‚Äôs life?" required>
    <label for="q10a">a) How‚Äôs life?</label>
    <input type="radio" id="q10b" name="q10" value="Hello there!">
    <label for="q10b">b) Hello there!</label>
    <input type="radio" id="q10c" name="q10" value="Nice to meet you">
    <label for="q10c">c) Nice to meet you</label>
    <input type="radio" id="q10d" name="q10" value="Good afternoon">
    <label for="q10d">d) Good afternoon</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">
    <b>Leia o texto:</b><br>
    Last weekend, Anna visited her cousin Lisa in the countryside. On Saturday, they went for a walk, played board games, and made a chocolate cake. Anna loved spending time away from the noisy city. On Sunday morning, they helped Lisa‚Äôs parents in the garden. Later, Anna took the bus back home feeling happy and relaxed.
    <br><br>
    11. Where did Anna go last weekend?
  </div>
  <div class="quiz-options">
    <input type="radio" id="q11a" name="q11" value="To the beach" required>
    <label for="q11a">a) To the beach</label>
    <input type="radio" id="q11b" name="q11" value="To her cousin‚Äôs house in the countryside">
    <label for="q11b">b) To her cousin‚Äôs house in the countryside</label>
    <input type="radio" id="q11c" name="q11" value="To the city center">
    <label for="q11c">c) To the city center</label>
    <input type="radio" id="q11d" name="q11" value="To school">
    <label for="q11d">d) To school</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">12. What did Anna and Lisa do on Saturday?</div>
  <div class="quiz-options">
    <input type="radio" id="q12a" name="q12" value="Watched a movie" required>
    <label for="q12a">a) Watched a movie</label>
    <input type="radio" id="q12b" name="q12" value="Went shopping">
    <label for="q12b">b) Went shopping</label>
    <input type="radio" id="q12c" name="q12" value="Played board games and made a cake">
    <label for="q12c">c) Played board games and made a cake</label>
    <input type="radio" id="q12d" name="q12" value="Cleaned the house">
    <label for="q12d">d) Cleaned the house</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">13. How did Anna feel at the end of the weekend?</div>
  <div class="quiz-options">
    <input type="radio" id="q13a" name="q13" value="Tired and bored" required>
    <label for="q13a">a) Tired and bored</label>
    <input type="radio" id="q13b" name="q13" value="Sad and lonely">
    <label for="q13b">b) Sad and lonely</label>
    <input type="radio" id="q13c" name="q13" value="Happy and relaxed">
    <label for="q13c">c) Happy and relaxed</label>
    <input type="radio" id="q13d" name="q13" value="Angry and stressed">
    <label for="q13d">d) Angry and stressed</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">14. What did they do on Sunday morning?</div>
  <div class="quiz-options">
    <input type="radio" id="q14a" name="q14" value="Traveled to another city" required>
    <label for="q14a">a) Traveled to another city</label>
    <input type="radio" id="q14b" name="q14" value="Played video games">
    <label for="q14b">b) Played video games</label>
    <input type="radio" id="q14c" name="q14" value="Helped in the garden">
    <label for="q14c">c) Helped in the garden</label>
    <input type="radio" id="q14d" name="q14" value="Went to a party">
    <label for="q14d">d) Went to a party</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">15. Why did Anna enjoy the weekend?</div>
  <div class="quiz-options">
    <input type="radio" id="q15a" name="q15" value="Because she got a new phone" required>
    <label for="q15a">a) Because she got a new phone</label>
    <input type="radio" id="q15b" name="q15" value="Because she stayed away from the noisy city">
    <label for="q15b">b) Because she stayed away from the noisy city</label>
    <input type="radio" id="q15c" name="q15" value="Because she stayed home alone">
    <label for="q15c">c) Because she stayed home alone</label>
    <input type="radio" id="q15d" name="q15" value="Because she studied for her test">
    <label for="q15d">d) Because she studied for her test</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>


<!-- PORTUGU√äS -->
<div class="step">
  <div class="form-label">16. Modalizadores do discurso:</div>
  <div class="quiz-options">
    <input type="radio" id="q16a" name="q16" value="Garantir a coer√™ncia textual..." required>
    <label for="q16a">a) Garantir a coer√™ncia textual...</label>
    <input type="radio" id="q16b" name="q16" value="Indicar apenas a progress√£o temporal...">
    <label for="q16b">b) Indicar apenas a progress√£o temporal...</label>
    <input type="radio" id="q16c" name="q16" value="Expressar a posi√ß√£o do enunciador...">
    <label for="q16c">c) Expressar a posi√ß√£o do enunciador...</label>
    <input type="radio" id="q16d" name="q16" value="Substituir substantivos...">
    <label for="q16d">d) Substituir substantivos...</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">17. Conjuga√ß√£o verbal correta:</div>
  <div class="quiz-options">
    <input type="radio" id="q17a" name="q17" value="Se eu p√¥r..." required>
    <label for="q17a">a) Se eu p√¥r...</label>
    <input type="radio" id="q17b" name="q17" value="Quando eles vierem de viagem...">
    <label for="q17b">b) Quando eles vierem de viagem...</label>
    <input type="radio" id="q17c" name="q17" value="Ele det√©m...">
    <label for="q17c">c) Ele det√©m...</label>
    <input type="radio" id="q17d" name="q17" value="V√≥s ides...">
    <label for="q17d">d) V√≥s ides...</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">18. Complete com os verbos adequados:<br>I. Quando eu (ver) a Ana...<br>II. Quando eu (vir)...</div>
  <div class="quiz-options">
    <input type="radio" id="q18a" name="q18" value="ver, vir" required>
    <label for="q18a">a) ver, vir</label>
    <input type="radio" id="q18b" name="q18" value="vir, vir">
    <label for="q18b">b) vir, vir</label>
    <input type="radio" id="q18c" name="q18" value="vir, vier">
    <label for="q18c">c) vir, vier</label>
    <input type="radio" id="q18d" name="q18" value="ver, vier">
    <label for="q18d">d) ver, vier</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">19. ‚ÄúE agora? Eu n√£o _________ aqui‚Äù</div>
  <div class="quiz-options">
    <input type="radio" id="q19a" name="q19" value="caibo" required>
    <label for="q19a">a) caibo</label>
    <input type="radio" id="q19b" name="q19" value="o verbo caber...">
    <label for="q19b">b) o verbo caber...</label>
    <input type="radio" id="q19c" name="q19" value="cabo">
    <label for="q19c">c) cabo</label>
    <input type="radio" id="q19d" name="q19" value="cabe">
    <label for="q19d">d) cabe</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">20. Forma simples do verbo ‚Äúpassado‚Äù:</div>
  <div class="quiz-options">
    <input type="radio" id="q20a" name="q20" value="passado" required>
    <label for="q20a">a) passado</label>
    <input type="radio" id="q20b" name="q20" value="tido">
    <label for="q20b">b) tido</label>
    <input type="radio" id="q20c" name="q20" value="passar">
    <label for="q20c">c) passar</label>
    <input type="radio" id="q20d" name="q20" value="tido passado">
    <label for="q20d">d) tido passado</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">21. Partic√≠pio verbal correto:</div>
  <div class="quiz-options">
    <input type="radio" id="q21a" name="q21" value="salvados" required>
    <label for="q21a">a) salvados</label>
    <input type="radio" id="q21b" name="q21" value="chego">
    <label for="q21b">b) chego</label>
    <input type="radio" id="q21c" name="q21" value="pego">
    <label for="q21c">c) pego</label>
    <input type="radio" id="q21d" name="q21" value="abrido">
    <label for="q21d">d) abrido</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">22. Estrutura de ‚Äúpartir√≠eis‚Äù:</div>
  <div class="quiz-options">
    <input type="radio" id="q22a" name="q22" value="part- + -i- + -r√≠eis" required>
    <label for="q22a">a) part- + -i- + -r√≠eis</label>
    <input type="radio" id="q22b" name="q22" value="part- + -i- + -ri- + -eis">
    <label for="q22b">b) part- + -i- + -ri- + -eis</label>
    <input type="radio" id="q22c" name="q22" value="part- + -i- + -r√≠amos + -eis">
    <label for="q22c">c) part- + -i- + -r√≠amos + -eis</label>
    <input type="radio" id="q22d" name="q22" value="part- + -i- + -ri- + -eis + -s">
    <label for="q22d">d) part- + -i- + -ri- + -eis + -s</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">23. Mesma desin√™ncia modo-temporal:</div>
  <div class="quiz-options">
    <input type="radio" id="q23a" name="q23" value="Cant√°vamos / Corr√≠amos" required>
    <label for="q23a">a) Cant√°vamos / Corr√≠amos</label>
    <input type="radio" id="q23b" name="q23" value="Fizeste / Dissestes">
    <label for="q23b">b) Fizeste / Dissestes</label>
    <input type="radio" id="q23c" name="q23" value="Que ele fa√ßa / Que ele diga">
    <label for="q23c">c) Que ele fa√ßa / Que ele diga</label>
    <input type="radio" id="q23d" name="q23" value="Estudarei / Correr√°s">
    <label for="q23d">d) Estudarei / Correr√°s</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">24. Modos verbais:</div>
  <div class="quiz-options">
    <input type="radio" id="q24a" name="q24" value="modo imperativo ‚Äì subjuntivo ‚Äì indicativo" required>
    <label for="q24a">a) modo imperativo ‚Äì subjuntivo ‚Äì indicativo</label>
    <input type="radio" id="q24b" name="q24" value="modo imperativo ‚Äì indicativo ‚Äì subjuntivo">
    <label for="q24b">b) modo imperativo ‚Äì indicativo ‚Äì subjuntivo</label>
    <input type="radio" id="q24c" name="q24" value="modo indicativo ‚Äì subjuntivo ‚Äì imperativo">
    <label for="q24c">c) modo indicativo ‚Äì subjuntivo ‚Äì imperativo</label>
    <input type="radio" id="q24d" name="q24" value="modo indicativo ‚Äì imperativo ‚Äì subjuntivo">
    <label for="q24d">d) modo indicativo ‚Äì imperativo ‚Äì subjuntivo</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">25. ‚ÄúEngarrafam‚Äù est√° no tempo:</div>
  <div class="quiz-options">
    <input type="radio" id="q25a" name="q25" value="presente do subjuntivo" required>
    <label for="q25a">a) presente do subjuntivo</label>
    <input type="radio" id="q25b" name="q25" value="imperfeito do indicativo">
    <label for="q25b">b) imperfeito do indicativo</label>
    <input type="radio" id="q25c" name="q25" value="pret√©rito perfeito do indicativo">
    <label for="q25c">c) pret√©rito perfeito do indicativo</label>
    <input type="radio" id="q25d" name="q25" value="presente do indicativo">
    <label for="q25d">d) presente do indicativo</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">26. Classifica√ß√£o dos termos:<br>I. Os turistas &gt;pareceram satisfeitos&lt;.<br>II. Nomearam o novo l√≠der &gt;competente&lt;.</div>
  <div class="quiz-options">
    <input type="radio" id="q26a" name="q26" value="Predicativo do Objeto e Predicativo do Sujeito" required>
    <label for="q26a">a) Predicativo do Objeto e Predicativo do Sujeito</label>
    <input type="radio" id="q26b" name="q26" value="Predicativo do Sujeito e Predicativo do Objeto">
    <label for="q26b">b) Predicativo do Sujeito e Predicativo do Objeto</label>
    <input type="radio" id="q26c" name="q26" value="Objeto Direto e Predicativo do Sujeito">
    <label for="q26c">c) Objeto Direto e Predicativo do Sujeito</label>
    <input type="radio" id="q26d" name="q26" value="Objeto Indireto e Objeto Direto">
    <label for="q26d">d) Objeto Indireto e Objeto Direto</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">27. Predicativo do objeto:</div>
  <div class="quiz-options">
    <input type="radio" id="q27a" name="q27" value="Aquele bolo >estava delicioso<." required>
    <label for="q27a">a) Aquele bolo &gt;estava delicioso&lt;.</label>
    <input type="radio" id="q27b" name="q27" value="Consideraram o novo projeto >vi√°vel<.">
    <label for="q27b">b) Consideraram o novo projeto &gt;vi√°vel&lt;.</label>
    <input type="radio" id="q27c" name="q27" value="Os atletas >chegaram exaustos<.">
    <label for="q27c">c) Os atletas &gt;chegaram exaustos&lt;.</label>
    <input type="radio" id="q27d" name="q27" value="Meu irm√£o >ficou doente< ontem.">
    <label for="q27d">d) Meu irm√£o &gt;ficou doente&lt; ontem.</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">28. Transitividade: ‚Äúdedicou-se... e obteve...‚Äù</div>
  <div class="quiz-options">
    <input type="radio" id="q28a" name="q28" value="Transitivo Direto e Indireto; Transitivo Direto" required>
    <label for="q28a">a) Transitivo Direto e Indireto; Transitivo Direto</label>
    <input type="radio" id="q28b" name="q28" value="Transitivo Indireto; Transitivo Direto">
    <label for="q28b">b) Transitivo Indireto; Transitivo Direto</label>
    <input type="radio" id="q28c" name="q28" value="Intransitivo; Transitivo Direto e Indireto">
    <label for="q28c">c) Intransitivo; Transitivo Direto e Indireto</label>
    <input type="radio" id="q28d" name="q28" value="Transitivo Direto; Intransitivo">
    <label for="q28d">d) Transitivo Direto; Intransitivo</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">29. Na frase "O p√∫blico aplaudiu intensamente, mas n√£o compreendeu a mensagem principal do espet√°culo.", a transitividade dos verbos destacados √©, respectivamente:</div>
  <div class="quiz-options">
    <input type="radio" id="q29a" name="q29" value="Intransitivo e Transitivo Indireto" required>
    <label for="q29a">a) Intransitivo e Transitivo Indireto.</label>
    <input type="radio" id="q29b" name="q29" value="Transitivo Direto e Intransitivo">
    <label for="q29b">b) Transitivo Direto e Intransitivo.</label>
    <input type="radio" id="q29c" name="q29" value="Transitivo Direto e Transitivo Direto">
    <label for="q29c">c) Transitivo Direto e Transitivo Direto.</label>
    <input type="radio" id="q29d" name="q29" value="Intransitivo e Transitivo Direto">
    <label for="q29d">d) Intransitivo e Transitivo Direto.</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="button" class="form-btn" onclick="nextStep()">Pr√≥xima</button>
  </div>
</div>
<div class="step">
  <div class="form-label">30. Em qual das ora√ß√µes abaixo o verbo destacado √© intransitivo?</div>
  <div class="quiz-options">
    <input type="radio" id="q30a" name="q30" value="Mariana comprou um presente para a m√£e." required>
    <label for="q30a">a) Mariana <u>comprou</u> um presente para a m√£e.</label>
    <input type="radio" id="q30b" name="q30" value="O sol nasceu no horizonte.">
    <label for="q30b">b) O sol <u>nasceu</u> no horizonte.</label>
    <input type="radio" id="q30c" name="q30" value="O diretor agradeceu a todos os presentes.">
    <label for="q30c">c) O diretor <u>agradeceu</u> a todos os presentes.</label>
    <input type="radio" id="q30d" name="q30" value="Ningu√©m acreditou em suas promessas.">
    <label for="q30d">d) Ningu√©m <u>acreditou</u> em suas promessas.</label>
  </div>
  <div class="botoes-etapa">
    <button type="button" class="form-btn btn-voltar" onclick="prevStep()">Voltar</button>
    <button type="submit" class="form-btn" id="enviar">Enviar</button>
  </div>
</div>
  </form>

  <div id="sending-loader" class="form-card" style="display:none;align-items:center;justify-content:center;min-height:220px;">
    <div style="display:flex;flex-direction:column;align-items:center;gap:18px;">
      <div class="loader"></div>
      <div style="font-size:2rem;color:#1de982;font-weight:bold;text-shadow:0 2px 8px #1de98255;">Enviando respostas...</div>
      <div style="color:#b2dfdb;font-size:1.1rem;">Por favor, aguarde.</div>
    </div>
  </div>

  <div id="resultado" class="form-card" style="display:none; flex-direction:column; align-items:center;">
    <div class="form-title">Resultado</div>
    <div id="mensagem-resultado" style="font-size:1.3rem; color:#1de982; margin:18px 0;"></div>
    <details id="spoiler-correcao" style="width:100%;margin-top:18px;">
      <summary style="cursor:pointer;font-size:1.1rem;color:#1de982;">Clique para ver a corre√ß√£o das quest√µes</summary>
      <div style="display:flex;align-items:center;justify-content:center;gap:12px;">
        <button id="prev-correcao" class="correcao-seta" style="display:none;" aria-label="Anterior">&lt;</button>
        <div id="correcao" class="correcao"></div>
        <button id="next-correcao" class="correcao-seta" style="display:none;" aria-label="Pr√≥ximo">&gt;</button>
      </div>
    </details>
    <div id="pontuacao-geral" style="font-size:1.2rem; color:#1de982; margin:18px 0;"></div>
  </div>

  <div class="form-card" id="aviso-transicao" style="display:none;align-items:center;justify-content:center;">
    <div id="texto-transicao" style="font-size:1.25rem;color:#1de982;text-align:center;">
      <!-- O texto ser√° preenchido via JS -->
    </div>
    <button class="form-btn" style="margin-top:18px;" onclick="continuarTransicao()">Continuar</button>
  </div>

  <script>
    // Gabarito para corre√ß√£o
const gabarito = [
  // Ingl√™s
  "yet", // q1
  "Have you done your homework yet?", // q2
  "always", // q3
  "go ‚Äì see ‚Äì eat", // q4
  "played", // q5
  "She goes to school every day.", // q6
  "watch", // q7
  "See you later!", // q8
  "I‚Äôm fine, thanks.", // q9
  "Good afternoon", // q10
  "To her cousin‚Äôs house in the countryside", // q11
  "Played board games and made a cake", // q12
  "Happy and relaxed", // q13
  "Helped in the garden", // q14
  "Because she stayed away from the noisy city", // q15

  // Portugu√™s
   "Expressar a posi√ß√£o do enunciador...", // q16
  "Quando eles vierem de viagem...", // q17
  "ver, vier", // q18
  "caibo", // q19
  "passar", // q20
  "pego", // q21
  "part- + -i- + -ri- + -eis", // q22
  "Cant√°vamos / Corr√≠amos", // q23
  "modo indicativo ‚Äì subjuntivo ‚Äì imperativo", // q24
  "presente do indicativo", // q25
  "Predicativo do Sujeito e Predicativo do Objeto", // q26
  "Consideraram o novo projeto >vi√°vel<.", // q27
  "Transitivo Indireto; Transitivo Direto", // q28
  "Transitivo Direto e Intransitivo", // q29
  "O sol nasceu no horizonte.", // q30
];

    const nomesQuestoes = [
      "q1","q2","q3","q4","q5","q6","q7","q8","q9","q10","q11","q12","q13","q14","q15",
      "q16","q17","q18","q19","q20","q21","q22","q23","q24","q25","q26","q27","q28","q29","q30"
    ];

const textosQuestoes = [
  // Ingl√™s
  "1. Complete the sentence:<br>She has ___ finished her homework.",
  "2. Escolha qual quest√£o usa corretamente o ‚Äúyet‚Äù:",
  "3. Complete:<br>He has ___ been very responsible.",
  "4. Qual das alternativas apresenta somente verbos irregulares?",
  "5. Qual √© o passado do verbo regular ‚Äúto play‚Äù?",
  "6. Qual das frases est√° correta no Simple Present?",
  "7. We ___ TV every night.",
  "8. Qual frase √© adequada para se despedir no final de uma conversa informal?",
  "9. Como se responde a ‚ÄúHow are you?‚Äù de maneira informal e positiva?",
  "10. ‚Äî Good afternoon, Dr. Silva.<br>‚Äî ________, Mr. Thomas. Please, have a seat.",
  "11. Where did Anna go last weekend?",
  "12. What did Anna and Lisa do on Saturday?",
  "13. How did Anna feel at the end of the weekend?",
  "14. What did they do on Sunday morning?",
  "15. Why did Anna enjoy the weekend?",

  // Portugu√™s
 "16. Modalizadores do discurso:",
  "17. Conjuga√ß√£o verbal correta:",
  "18. Complete com os verbos adequados:<br>I. Quando eu (ver) a Ana...<br>II. Quando eu (vir)...",
  "19. ‚ÄúE agora? Eu n√£o _________ aqui‚Äù",
  "20. Forma simples do verbo ‚Äúpassado‚Äù:",
  "21. Partic√≠pio verbal correto:",
  "22. Estrutura de ‚Äúpartir√≠eis‚Äù:",
  "23. Mesma desin√™ncia modo-temporal:",
  "24. Modos verbais:",
  "25. ‚ÄúEngarrafam‚Äù est√° no tempo:",
  "26. Classifica√ß√£o dos termos:<br>I. Os turistas &gt;pareceram satisfeitos&lt;.<br>II. Nomearam o novo l√≠der &gt;competente&lt;.",
  "27. Predicativo do objeto:",
  "28. Transitividade: ‚Äúdedicou-se... e obteve...‚Äù",
  "29. Na frase \"O p√∫blico aplaudiu intensamente, mas n√£o compreendeu a mensagem principal do espet√°culo.\", a transitividade dos verbos destacados √©, respectivamente:",
  "30. Em qual das ora√ß√µes abaixo o verbo destacado √© intransitivo?"
];

    let tempo = 7200; // 2 horas
    let timerInterval;
    let enviado = false;

    // Vari√°veis globais para corre√ß√£o/carrossel
    let correcaoPaginas = [];
    let paginaAtual = 0;

    // Wizard de etapas
    let currentStep = 0;
    const steps = document.querySelectorAll('.step');
    const progressBar = document.getElementById('progress-bar');
    function updateProgressBar() {
      const total = steps.length;
      const percent = Math.round((currentStep) / (total - 1) * 100);
      progressBar.style.width = percent + "%";
    }
    function nextStep() {
      // Valida√ß√£o dos campos obrigat√≥rios da etapa atual
      const inputs = steps[currentStep].querySelectorAll('input, select');
      for (let input of inputs) {
        if (input.type === "radio") {
          const radios = steps[currentStep].querySelectorAll(`input[name="${input.name}"]`);
          if (![...radios].some(r => r.checked)) {
            alert('Selecione uma alternativa!');
            return;
          }
        } else if (!input.checkValidity()) {
          input.reportValidity();
          return;
        }
      }
      steps[currentStep].classList.remove('active');
      currentStep++;
      // Aviso ap√≥s o nome da equipe (etapa 1, √≠ndice 1)
      if (currentStep === 1) {
        mostrarTransicao(`
          <span style="font-size:2.2rem;display:block;margin-bottom:10px;">üìäüßÆ</span>
          <b>Agora come√ßam as 15 perguntas de Ingl√™s!</b>
          <br><br>
          Responda com aten√ß√£o.<br>
          Boa sorte! üçÄ
        `);
        return;
      }
      // Aviso ao chegar na quest√£o 16 (√≠ndice 16)
      if (currentStep === 16) {
        mostrarTransicao(`
          <span style="font-size:2.2rem;display:block;margin-bottom:10px;">üß™‚öóÔ∏è</span>
          <b>Agora come√ßam as 15 perguntas de Portugu√™s!</b>
          <br><br>
          Continue focado.<br>
          Voc√™ est√° indo muito bem! üöÄ
        `);
        return;
      }
      if (steps[currentStep]) {
        steps[currentStep].classList.add('active');
        updateProgressBar();
      }
    }
    function prevStep() {
      if (currentStep > 0) {
        steps[currentStep].classList.remove('active');
        currentStep--;
        steps[currentStep].classList.add('active');
        updateProgressBar();
      }
    }

    function comecar() {
      document.getElementById('inicio').style.display = 'none';
      document.getElementById('quiz-form').style.display = 'flex';
      document.getElementById('timer-container').style.display = 'flex';
      updateProgressBar();
      iniciarTimer();
      window.addEventListener('blur', autoEnviar);
    }

    function iniciarTimer() {
      const timerCount = document.getElementById('timer-count');
      timerInterval = setInterval(() => {
        if (tempo <= 0) {
          clearInterval(timerInterval);
          autoEnviar();
          timerCount.textContent = "Tempo esgotado!";
          return;
        }
        let min = Math.floor(tempo / 60);
        let seg = tempo % 60;
        timerCount.textContent = `${min}:${String(seg).padStart(2, '0')}`;
        tempo--;
      }, 1000);
    }

    function autoEnviar() {
      if (!enviado) {
        enviado = true;
        document.getElementById('quiz-form').requestSubmit();
      }
    }

    // Envio do formul√°rio
    const form = document.getElementById('quiz-form');
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      enviado = true;
      clearInterval(timerInterval);
      window.removeEventListener('blur', autoEnviar);

      form.style.display = 'none';
      document.getElementById('timer-container').style.display = 'none';
      document.getElementById('sending-loader').style.display = 'flex';

      // Corrigir e mostrar resultado
      let acertos = 0;
      correcaoPaginas = [];
      paginaAtual = 0;
      for (let i = 0; i < gabarito.length; i += 5) {
        let bloco = '';
        for (let j = i; j < i + 5 && j < gabarito.length; j++) {
          const marcada = form.querySelector(`input[name="${nomesQuestoes[j]}"]:checked`);
          const resposta = marcada ? marcada.value : '';
          if (resposta === gabarito[j]) {
            bloco += `<b>${textosQuestoes[j]}</b><br><span style="color:#1de982">‚úî Correto!</span><br><br>`;
            acertos++;
          } else {
            bloco += `<b>${textosQuestoes[j]}</b><br>
              <span style="color:#ff5252">‚úò Sua resposta: ${resposta || '<i>N√£o respondida</i>'}</span><br>
              <span style="color:#1de982">‚úî Correto: ${gabarito[j]}</span><br><br>`;
          }
        }
        correcaoPaginas.push(bloco);
      }

      // Monta os dados do formul√°rio
      const formData = new FormData(form);

      // Envia para o Apps Script
      fetch('https://script.google.com/macros/s/AKfycbyCyYfbu2N7YNaQNyHdCi5eu71nI1gY38lzMvTrtwkk40HwhBjFbLj1FRsa3C4I-eM-/exec', {
        method: "POST",
        body: formData
      })
      .finally(() => {
        document.getElementById('sending-loader').style.display = 'none';
        // Mensagem de confirma√ß√£o estilizada
        const confirmDiv = document.createElement('div');
        confirmDiv.style.display = 'flex';
        confirmDiv.style.flexDirection = 'column';
        confirmDiv.style.alignItems = 'center';
        confirmDiv.style.justifyContent = 'center';
        confirmDiv.style.background = '#162c20';
        confirmDiv.style.border = '2.5px solid #1de982';
        confirmDiv.style.borderRadius = '18px';
        confirmDiv.style.boxShadow = '0 8px 32px #0a1a12, 0 1.5px 8px #1b3c2b66';
        confirmDiv.style.padding = '38px 28px 32px 28px';
        confirmDiv.style.maxWidth = '400px';
        confirmDiv.style.margin = '60px auto 0 auto';
        confirmDiv.innerHTML = `
          <span style="font-size:3.2rem; color:#1de982; filter:drop-shadow(0 0 8px #1de98288); margin-bottom:18px;">üéâ</span>
          <div style="font-size:2rem; color:#1de982; font-weight:900; text-align:center; margin-bottom:10px;">Respostas enviadas!</div>
          <div style="color:#b2dfdb; font-size:1.15rem; text-align:center; margin-bottom:18px;">Suas respostas foram registradas com sucesso.<br>Obrigado por participar do Circuito!<br><span style='color:#43e97b;'>Voc√™ j√° pode fechar esta p√°gina.</span></div>
        `;
        document.body.innerHTML = '';
        document.body.appendChild(confirmDiv);

        // Mostrar respostas marcadas pelo aluno ap√≥s o envio
        setTimeout(() => {
          let respostasMarcadas = [];
          for (let i = 0; i < nomesQuestoes.length; i++) {
            const marcada = form.querySelector(`input[name="${nomesQuestoes[i]}"]:checked`);
            let resposta = '';
            if (marcada) {
              const label = form.querySelector(`label[for="${marcada.id}"]`);
              resposta = label ? label.innerText : marcada.value;
            } else {
              resposta = '<span style="color:#ff5252;"><i>N√£o respondida</i></span>';
            }
            respostasMarcadas.push(`
      <div style="
        background:#0e1c14;
        border-radius:10px;
        border:1.5px solid #1de98255;
        margin-bottom:16px;
        padding:14px 16px;
        box-shadow:0 2px 8px #1de98222;
      ">
        <div style="color:#1de982;font-weight:600;margin-bottom:6px;">${textosQuestoes[i]}</div>
        <div style="color:#b2dfdb;font-size:1.08rem;">
          <b>Sua resposta:</b> ${resposta}
        </div>
      </div>
    `);
          }
          const respostasDiv = document.createElement('div');
          respostasDiv.className = 'form-card';
          respostasDiv.style.margin = '30px auto';
          respostasDiv.style.maxWidth = '600px';
          respostasDiv.innerHTML = `
    <div class="form-title" style="margin-bottom:10px;">Suas respostas</div>
    <div style="text-align:left;">${respostasMarcadas.join('')}</div>
    <div style="margin-top:24px;color:#1de982;text-align:center;font-size:1.15rem;">
      Obrigado por participar do Circuito!<br>Voc√™ j√° pode fechar esta p√°gina.
    </div>
  `;
          document.body.innerHTML = '';
          document.body.appendChild(respostasDiv);
        }, 2200); // espera 2,2 segundos para garantir que a mensagem de "Respostas enviadas!" apare√ßa antes
      });
    });

    function mostrarPaginaCorrecao(idx) {
      document.getElementById('correcao').innerHTML = correcaoPaginas[idx];
      document.getElementById('prev-correcao').style.display = idx > 0 ? '' : 'none';
      document.getElementById('next-correcao').style.display = idx < correcaoPaginas.length - 1 ? '' : 'none';
    }
    document.getElementById('prev-correcao').onclick = () => {
      if (paginaAtual > 0) {
        paginaAtual--;
        mostrarPaginaCorrecao(paginaAtual);
      }
    };
    document.getElementById('next-correcao').onclick = () => {
      if (paginaAtual < correcaoPaginas.length - 1) {
        paginaAtual++;
        mostrarPaginaCorrecao(paginaAtual);
      }
    };
    // Mostrar a primeira p√°gina ao abrir o spoiler
    document.getElementById('spoiler-correcao').addEventListener('toggle', function() {
      if (this.open) mostrarPaginaCorrecao(0);
    });

    let aguardandoTransicao = false;

    function mostrarTransicao(texto) {
      document.getElementById('quiz-form').style.display = 'none';
      document.getElementById('aviso-transicao').style.display = 'flex';
      document.getElementById('texto-transicao').innerHTML = texto;
      aguardandoTransicao = true;
    }

    function continuarTransicao() {
      document.getElementById('aviso-transicao').style.display = 'none';
      document.getElementById('quiz-form').style.display = 'flex';
      aguardandoTransicao = false;
      steps[currentStep].classList.add('active');
      updateProgressBar();
    }

    // Adicione no in√≠cio do quiz
    window.onbeforeunload = function(e) {
      if (!enviado) {
        e.preventDefault();
        e.returnValue = 'Se voc√™ sair, suas respostas ser√£o enviadas e n√£o poder√° voltar!';
        return e.returnValue;
      }
    };

    // Ap√≥s o envio do formul√°rio, remova o alerta
    form.addEventListener('submit', function(e) {
      enviado = true;
      window.onbeforeunload = null;
    });

    // Tenta enviar automaticamente ao sair (n√£o √© garantido)
    window.addEventListener('beforeunload', function (e) {
      if (!enviado) {
        document.getElementById('quiz-form').requestSubmit();
        e.preventDefault();
        e.returnValue = '';
      }
    });

    // Bloqueia bot√£o direito
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
    });

    // Bloqueia teclas de atalho comuns
    document.addEventListener('keydown', function(e) {
      if (
        e.key === "F12" ||
        (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "i") ||
        (e.ctrlKey && e.key.toLowerCase() === "u") ||
        (e.ctrlKey && e.key.toLowerCase() === "c") ||
        (e.ctrlKey && e.key.toLowerCase() === "v") ||
        (e.ctrlKey && e.key.toLowerCase() === "s") ||
        (e.ctrlKey && e.key.toLowerCase() === "p")
      ) {
        e.preventDefault();
      }
    });

    // Loader de abertura
    window.addEventListener('load', function() {
      document.getElementById('page-loader').style.display = 'none';
    });
  </script>
</body>
</html>
